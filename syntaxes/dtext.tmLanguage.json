{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "DText (e621)",
	"patterns": [
		{ "include": "#markup" },
		{ "include": "#meta" }
	],
	"repository": {
		"markup": {
			"patterns": [
				{
					"name": "markup.inline.raw.code.dtext",
					"match": "(`)[^`]*(`)",
					"captures": {
						"1" : { "name": "punctuation.definition.raw.dtext" },
						"2" : { "name": "punctuation.definition.raw.dtext" }
					}
				},
				{
					"name": "meta.tag.markup.bold.dtext",
					"contentName": "markup.bold.dtext",
					"begin": "((\\[)(b)(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.markup.bold.begin.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.markup.bold.end.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				},
				{
					"name": "meta.tag.markup.italic.dtext",
					"contentName": "markup.italic.dtext",
					"begin": "((\\[)(i)(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.markup.italic.begin.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.markup.italic.end.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				},
				{
					"name": "meta.tag.markup.subscript.dtext",
					"contentName": "markup.subscript.dtext",
					"begin": "((\\[)(sub)(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.markup.subscript.begin.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.markup.subscript.end.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				},
				{
					"name": "meta.tag.markup.superscript.dtext",
					"contentName": "markup.superscript.dtext",
					"begin": "((\\[)(sup)(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.markup.superscript.begin.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.markup.superscript.end.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				},
				{
					"name": "meta.tag.markup.strikethrough.dtext",
					"contentName": "markup.strikethrough.dtext",
					"begin": "((\\[)(s)(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.markup.strikethrough.begin.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.markup.strikethrough.end.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				},
				{
					"name": "meta.tag.markup.spoiler.dtext",
					"contentName": "markup.spoiler.dtext",
					"begin": "((\\[)(spoiler)(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.markup.spoiler.begin.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.markup.spoiler.end.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				},
				{
					"name": "meta.tag.markup.color.dtext",
					"contentName": "markup.color.dtext",
					"begin": "((\\[)(color)((=)([^\\]]*))(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.markup.color.begin.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "meta.attribute.color.dtext" },
						"5": { "name": "punctuation.separator.key-value.dtext" },
						"6": { "name": "string.unquoted.dtext" },
						"7": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.markup.color.end.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				}
			]
		},
		"meta": {
			"patterns": [
				{
					"name": "meta.tag.structure.section.dtext",
					"begin": "(?<!\\[)((\\[)(section)((,)(expanded))?((=)([^\\]]*))?(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.structure.section.begin.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "meta.attribute.expanded.dtext" },
						"5": { "name": "punctuation.separator.comma.dtext" },
						"6": { "name": "entity.other.attribute-name.dtext" },
						"7": { "name": "meta.attribute.title.dtext" },
						"8": { "name": "punctuation.separator.key-value.dtext" },
						"9": { "name": "string.unquoted.dtext" },
						"10": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "(?<!\\[)((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.structure.section.end.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				},
				{
					"name": "meta.tag.other.unrecognized.dtext",
					"begin": "(?<!\\[)((\\[)([a-zA-Z0-9]+)([^\\]]*)(\\]))",
					"beginCaptures": {
						"1": { "name": "meta.tag.other.unrecognized.start.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "meta.attribute.unknown.dtext" },
						"5": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"end": "(?<!\\[)((\\[/)(\\3)(\\]))",
					"endCaptures": {
						"1": { "name": "meta.tag.other.unrecognized.start.dtext" },
						"2": { "name": "punctuation.definition.tag.begin.dtext" },
						"3": { "name": "entity.name.tag.dtext" },
						"4": { "name": "punctuation.definition.tag.end.dtext" }
					},
					"patterns": [
						{ "include": "#markup" },
						{ "include": "#meta" }
					]
				},
				{
					"name": "meta.link.anchor.dtext",
					"match": "((\\[)(\\#[- a-zA-Z0-9]+)(\\]))",
					"captures": {
						"1": { "name": "meta.link.reference.dtext" },
						"2": { "name": "punctuation.definition.link.title.begin.dtext" },
						"3": { "name": "string.other.link.title.dtext" },
						"4": { "name": "punctuation.definition.link.title.end.dtext" }
					}
				},
				{
					"name": "meta.link.inline.dtext",
					"match": "((\\[\\[)([^\\]|]+)(?:(\\|)([^\\]]+))?(\\]))",
					"captures": {
						"1": { "name": "" },
						"2": { "name": "punctuation.definition.link.title.begin.dtext" },
						"3": { "name": "markup.underline.link.dtext" },
						"4": { "name": "punctuation.separator.link-title.dtext" },
						"5": { "name": "string.other.link.title.dtext" },
						"6": { "name": "punctuation.definition.link.title.end.dtext" }
					}
				},
				{
					"name": "meta.link.inline.dtext",
					"match": "((\")([^\"]*)(\"))(:)(?:(\\[)([^\\]]*)(\\])|(\\S*))",
					"captures": {
						"1": { "name": "string.other.link.title.dtext" },
						"2": { "name": "punctuation.definition.link.title.begin.dtext" },
						"3": { "name": "" },
						"4": { "name": "punctuation.definition.link.title.end.dtext" },
						"5": { "name": "punctuation.separator.link-title.dtext" },
						"6": { "name": "punctuation.definition.metadata.begin.dtext" },
						"7": { "name": "markup.underline.link.dtext" },
						"8": { "name": "punctuation.definition.metadata.end.dtext" },
						"9": { "name": "markup.underline.link.dtext" }
					}
				},
				{
					"name": "meta.link.inline.tag-search.dtext",
					"match": "((\\{\\{)([^}]+)(\\}\\}))",
					"captures": {
						"1": { "name": "string.other.link.title.dtext" },
						"2": { "name": "punctuation.definition.link.title.begin.dtext" },
						"3": { "name": "markup.underline.link.tag-search.dtext" },
						"4": { "name": "punctuation.definition.link.title.end.dtext" }
					}
				}
			]
		}
	},
	"scopeName": "source.dtext"
}